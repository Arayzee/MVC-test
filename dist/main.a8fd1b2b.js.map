{"version":3,"sources":["base/EventBus.js","base/Model.js","base/View.js","app/app1.js","app/app2.js","app/app3.js","app/app4.js","main.js"],"names":["EventBus","eventName","fn","window","addEventListener","removeEventListener","ev","CustomEvent","dispatchEvent","Model","options","Object","assign","console","error","View","el","document","querySelector","render","data","autoBindEvents","on","key","value","events","index","indexOf","part1","slice","part2","e","Array","from","querySelectorAll","target","html","wrap","createElement","innerHTML","content","firstElementChild","m","n","parseFloat","localStorage","getItem","update","trigger","setItem","toString","init","append","createNode","replace","add1","log","minus1","mul2","div2","parseInt","switch","dataset","flag","move","className"],"mappings":"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","file":"main.a8fd1b2b.js","sourceRoot":"..\\src","sourcesContent":["class EventBus {\r\n    on(eventName, fn) {\r\n        return window.addEventListener(eventName, fn)\r\n    }\r\n    off(eventName, fn) {\r\n        return window.removeEventListener(eventName, fn)\r\n    }\r\n    trigger(eventName) {\r\n        let ev = new CustomEvent(eventName)\r\n        return window.dispatchEvent(ev)\r\n    }\r\n}\r\n\r\nexport default EventBus","import EventBus from \"./EventBus\";\r\n\r\nclass Model extends  EventBus {\r\n    constructor(options) {\r\n        super();\r\n        Object.assign(this, options)\r\n    }\r\n    update() {\r\n        console && console.error() && console.error('你还没有实现update')\r\n    }\r\n}\r\n\r\nexport default Model\r\n","import EventBus from \"./EventBus\"\r\n\r\nclass View extends EventBus {\r\n    constructor(options) {\r\n        super();\r\n        Object.assign(this, options)\r\n        this.el = document.querySelector(this.el)\r\n        this.render(this.data)\r\n        this.autoBindEvents()\r\n        this.on('m:updated', () => {\r\n            this.render(this.data)\r\n        })\r\n    }\r\n    autoBindEvents() {\r\n        for (let key in this.events) {\r\n            let value = this[this.events[key]]\r\n            let index = key.indexOf(' ')\r\n            let part1 = key.slice(0, index)\r\n            let part2 = key.slice(index + 1)\r\n            this.el.addEventListener(part1, (e) => {\r\n                Array.from(document.querySelectorAll(part2)).indexOf(e.target) !== -1 && value(e)\r\n            })\r\n        }\r\n    }\r\n    createNode(html) {\r\n        const wrap = document.createElement('template')\r\n        wrap.innerHTML = html\r\n        return wrap.content.firstElementChild\r\n    }\r\n}\r\n\r\nexport default View","import './app1.css'\r\nimport Model from \"../base/Model\"\r\nimport View from \"../base/View\"\r\n\r\nconst m = new Model({\r\n    data: {\r\n        n: parseFloat(localStorage.getItem('n')) || 100\r\n    },\r\n    update(data) {\r\n        Object.assign(this.data, data)\r\n        this.trigger('m:updated')\r\n        localStorage.setItem('n', this.data.n.toString())\r\n    }\r\n})\r\n\r\nconst init = (el) => {\r\n    new View({\r\n        el: el,\r\n        data: m.data,\r\n        html: `\r\n            <div>\r\n                <div id=\"num\">{{n}}</div>\r\n                <div id=\"btnList\">\r\n                    <button id=\"add1\">+1</button>\r\n                    <button id=\"minus1\">-1</button>\r\n                    <button id=\"mul2\">*2</button>\r\n                    <button id=\"div2\">÷2</button>\r\n                </div>\r\n            </div>\r\n        `,\r\n        render() {\r\n            this.el.innerHTML = ''\r\n            this.el.append(this.createNode(this.html.replace('{{n}}', this.data.n)))\r\n        },\r\n        events: {\r\n            'click #add1': 'add1',\r\n            'click #minus1': 'minus1',\r\n            'click #mul2': 'mul2',\r\n            'click #div2': 'div2'\r\n        },\r\n        add1() {\r\n            m.update({n: m.data.n + 1})\r\n            console.log('add')\r\n        },\r\n        minus1() {\r\n            m.update({n: m.data.n - 1})\r\n            console.log('minus')\r\n        },\r\n        mul2() {\r\n            m.update({n: m.data.n * 2})\r\n            console.log('mul')\r\n        },\r\n        div2() {\r\n            m.update({n: m.data.n / 2})\r\n            console.log('div')\r\n        }\r\n    })\r\n}\r\n\r\nexport default init","import './app2.css'\r\nimport Model from \"../base/Model\"\r\nimport View from \"../base/View\"\r\n\r\nconst m = new Model({\r\n    data: {\r\n        index: parseInt(localStorage.getItem('index')) || 0\r\n    },\r\n    update(data) {\r\n        Object.assign(this.data, data)\r\n        this.trigger('m:updated')\r\n        localStorage.setItem('index', this.data.index.toString())\r\n    }\r\n})\r\n\r\nconst init = (el) => {\r\n    new View({\r\n        el: el,\r\n        data: m.data,\r\n        html: (index) => {\r\n            return `\r\n                <div>\r\n                    <div id=\"topbar\">\r\n                        <div class=\"${index === 0 ? 'selected' : ''}\" data-index=\"0\">PAGE 1</div>\r\n                        <div class=\"${index === 1 ? 'selected' : ''}\" data-index=\"1\">PAGE 2</div>\r\n                    </div>\r\n                    <div id=\"view\">\r\n                        <div class=\"${index === 0 ? 'active' : ''}\">This is page 1 !\\nWelcome!</div>\r\n                        <div class=\"${index === 1 ? 'active' : ''}\">This is page 2 !\\nNice to meet you!</div>\r\n                    </div>\r\n                </div>\r\n            `\r\n        },\r\n        render() {\r\n            this.el.innerHTML = ''\r\n            this.el.append(this.createNode(this.html(this.data.index)))\r\n        },\r\n        events: {\r\n            'click #topbar > div': 'switch'\r\n        },\r\n        switch(e) {\r\n            console.log(e.target.dataset.index)\r\n            m.update({index: parseInt(e.target.dataset.index)})\r\n        }\r\n    })\r\n}\r\n\r\nexport default init","import './app3.css'\r\nimport Model from \"../base/Model\"\r\nimport View from \"../base/View\"\r\n\r\nconst m = new Model({\r\n    data: {\r\n        flag: localStorage.getItem('flag') || 'no'\r\n    },\r\n    update(data) {\r\n        Object.assign(this.data, data)\r\n        localStorage.setItem('flag', this.data.flag)\r\n    }\r\n})\r\n\r\nconst init = (el) => {\r\n    new View({\r\n        el: el,\r\n        data: m.data,\r\n        html: (flag) => {\r\n            return `\r\n                <div>\r\n                    <div class=\"${flag === 'no' ? '' : 'moved'}\" id=\"rect\"></div>\r\n                </div>\r\n            `\r\n        },\r\n        render() {\r\n            this.el.innerHTML = ''\r\n            this.el.append(this.createNode(this.html(this.data.flag)))\r\n        },\r\n        events: {\r\n            'click #rect': 'move'\r\n        },\r\n        move() {\r\n            m.update({flag: m.data.flag === 'no' ? 'yes' : 'no'})\r\n            m.data.flag === 'no' ? document.querySelector('#rect').className = '' : document.querySelector('#rect').className = 'moved'\r\n        }\r\n    })\r\n}\r\n\r\nexport default init","import './app4.css'\r\nimport View from \"../base/View\"\r\n\r\n\r\nconst init = (el) => {\r\n    new View({\r\n        el: el,\r\n        data: {},\r\n        html: `\r\n            <div>\r\n                <div id=\"circle\"></div>\r\n            </div>\r\n        `,\r\n        render() {\r\n            this.el.innerHTML = ''\r\n            this.el.append(this.createNode(this.html))\r\n        }\r\n    })\r\n}\r\n\r\nexport default init","import './style.css'\r\n\r\nimport app1 from './app/app1'\r\nimport app2 from './app/app2'\r\nimport app3 from \"./app/app3\"\r\nimport app4 from \"./app/app4\"\r\n\r\n\r\napp1('#app1')\r\napp2('#app2')\r\napp3('#app3')\r\napp4('#app4')"]}